<html>
<!-- ***** BEGIN LICENSE BLOCK *****
	Copyright 2007-2009 Eric Cassar (Cyan)

    This file is part of "Automatic Save Folder".
    You may find the license in the LICENSE file

    ***** END LICENSE BLOCK ***** -->
<body style="background-color:#FFFFFF;">
<center><font size="+1"><b>Automatic Save Folder V0.9.4b</b></font></center>
<center>by Cyan</center>
<br /><b><u>Important</u></b>:
<br />
<br />This extension only works if the download window is shown (the one asking you to open, execute or save the file to the disk)
<br/><img src="chrome://asf/skin/screen_save_80fr.png" />
<br />If Firefox doesn't show this window, the extension will not work.
<br />
<br />
<br />If some filters don't work, be sure to check if Firefox doesn't use another process on the downloaded file:
<br />
<br />1. 
<br />&nbsp;&nbsp; Go to the menu "Tools" and "Options...".
<br />2.
<br />&nbsp;&nbsp; - For the Firefox 3 users: go to the "Applications" tab
<br />&nbsp;&nbsp; - For the previous Firefox versions users: Go to the "Content" tab and click on the "manage..." at the bottom right.
<br />3.
<br />&nbsp;&nbsp; Verify if the File Type you want to download is set to "Always ask".
<br /><img src="chrome://asf/skin/screen_apps_fr.png" />
<br />
<br />
<br />
<br />
<br />
<br />
<br /><b><u>How to use</u></b>:
<br />
<br />
<br />This extension allows you to define, using filters, the folder which will be automatically chosen while saving your files.
<br />
<br /><u>Filter rules</u>:
<br />- The filters are defined using the file's name and the domain.
<br />Attention: For the domain do not enter the address of the current website, but the server address where the file is located. (update from 0.9.3 : test with referer adress)
<br />- The filters have to match the name of the file or the domain. For example do not write <b>"google.com"</b> but only <b>google.com</b> (without quotes)
<br />- You can use the wildcard character <b>*</b> (asterisk) to replace parts of the filter: <b>wiki*.org</b>
<br />- The asterisk is not needed at the beginning and end of the filter string. Writing <b>*wiki*</b> or <b>wiki</b> is the same. 
<br />- Same thing with the filename filter: <b>*.zip</b> or <b>.zip</b> will work the same way.
<br />- The filters are verified from top to bottom and the process stops when a filter matching the downloaded file is met. Be sure to sort your filters accordingly.
<br />- The filters are case insensitive, there is no difference between upper and lower case while the filters are processed.
<br />
<br />
<br />This extension can be used with regular expressions.
<br />You can read the regular expression help menu on the filter adding and editing window.
<br />
<br />
<br />Dynamic variables are available to create new folders when saving, named after the date of the day, the file name or domain name.
<br />You can refer to the option tab to see the dynamic tag list.
<br />
<br />
<br />
<br /><u>Few filters examples</u>:
<br />
<br />If you want all your executable files <b>.exe</b> to be saved in a specific folder:
<br />- <b>domain</b>: all
<br />- <b>filter</b>: .exe
<br />- <b>folder</b>: your executable files folder
<br />
<br />
<br />Now if you want all the files from a particular website (mozilla.org for example) to be saved in a Mozilla folder:
<br />- <b>domain</b>: mozilla.org
<br />- <b>filter</b>: all
<br />- <b>folder</b>: your Mozilla folder
<br />
<br />
<br />Then, if you need to sort all <b>.zip</b> files from mozilla.org, and leaves other files in the previous folder:
<br />- <b>domain</b>: mozilla
<br />- <b>filter</b>: .zip
<br />- <b>folder</b>: your Mozilla folder for .zip files
<br />And sort this filter above the previous one. Do remember the filters are verified from top to bottom.
<br />
<br />
<br />And last, you can define filters with more complete name, not only with the file extension:
<br />- <b>domain</b>: all
<br />- <b>filter</b>: firefox*.exe
<br />- <b>folder</b>: your folder for all version of Firefox installation program
<br />
<br />
<br /><u>Here are a few examples with simple and complex variables</u> :
<br />
<br />To sort out all the nightly builds of firefox in a subfolder of D:\firefox :
<br />- <b>domain</b> : All
<br />- <b>filter</b> : firefox*pre
<br />- <b>folder</b> : D:\firefox\Nightly\%Y%-%m%-%d%
<br />The extension will create a subfolder named after the date of the day. For example "2009-12-04", in which your file will be saved.
<br />
<br />
<br />To sort out a file according to its extension :
<br />- <b>domain</b> : All
<br />- <b>filter</b> : All
<br />- <b>folder</b> : D:\download\%asf_x%
<br />The extension will create a subfolder named "zip" for the .zip files, "rar" for .rar files, etc. in which your file will be saved.
<br />
<br />
<br />To create or not create different subdirectories according to the file :
<br />
<br />Example : We wish to download videos named "My_vacation_date-of-the-trip.avi".
<br />The videos have .srt subtitles to explain the trip, 
.zip files are also available with photos of the trip, 
videos can be downloaded with .avi, .torrent or .nzb extension (newsgroup).
<br />
<br />".avi" and ".srt" will have to go in the D:\video\vacation file.
<br />".zip", ".torrent" and ".nzb" will have to go respectively in subdirectories D:\video\vacation\zip, D:\video\vacation\torrent and D:\video\vacation\nzb.
<br />
<br />- <b>domain</b> : all
<br />- <b>filter</b> : /^My_vacation.*\.(avi|srt|zip|torrent|nzb)$/
<br />- <b>folder</b> : D:\video\vacation\%asf_rf%(zip|torrent|nzb)$%asf_rf%
<br />
<br />Explanation about the filters :
<br />The filter will be activated for all the files beginning with "My_vacation" and ending with one of the available extensions (avi, srt, zip, torrent or nzb).
<br />The directory created will depend on the filtering : %asf_rf% analyses the name of the file downloaded with the regular expression contained between the two %asf_rf% : If the file ends with "zip", "torrent" or "nzb", the portion captured by the regular expression creates the subdirectory.
<br />If none of those three extensions are found, the regular expression won't do anything, no subfolder is created and files will be downloaded in D:\video\vacation\
<br />
<br />Note : You can put as many tags as you want for the main folder.
<br />The filter could have been :
<br />- <b>filter</b> : /.*\.(avi|srt|zip|torrent|nzb)$/
<br />- <b>folder</b> : D:\video\%asf_rf%(vacation|wedding)%asf_rf%\%asf_rf%(zip|torrent|nzb)$%asf_rf%
<br />In this case, the subfolder "vacation" is created only if the name of the file contains "vacation".
<br />
<br />
<br />
<br />
<br /><b><u>Known problems</u></b>:
<br />
<br />- For some users, ASF only suggest the default folder instead of the filter's folder.
<br />Not enough user's comments to understand what this problem is. 
<br />Please contact the author if you have this bug and you want to help to correct it.
<br />
<br />- If your filters contained unicode characters in previous version (less than 0.9.3), the filter's path may appear blank, but working.
<br />Please, edit the filters and define again your path manually.
<br />
<br />- The domain filtering is now done on the referer URL if the file hosted domain doesn't match the filter.
<br />It can generate problems on the filter validation when the user doesn't attempt to validate it.
<br />if this problem happen, I'll delete this option (Please leave comments on this option: useful or bothering ?).
<br />
<br />
<br />
<br /><b><u>To do</u></b>:
<br />
<br />I'm looking for help with this:
<br />- Enable filter while using right-click menu "Save target as..." and "Save picture as...".
<br />
<br />You can contact me if you want to help or have any suggestions:
<br />http://asf.mangaheart.org
<br />or
<br />https://addons.mozilla.org/fr/firefox/addon/4781
<br />
<br />
<br />
<br /><b><u>History</u></b>:
<br />
<br /><pre>

+ added
- removed
* fixed or changed


Version 0.9.3: (2009 07 05)
+ Added the version number in the main config window title.
+ Add option to double click a Path field to open the explorer window.
+ New tabs to separate filters, options, help and versions history.
+ New dynamic variable to create folders. (Thanks to Ted for the group capture with $1)
+ Option to activate or deactivate the dynamic variables (Advanced mode).
+ New context menu on the filter list to duplicate a filter, or move to top/bottom in one click.
+ [Experimental] For ease to use when the hosted domain is random (ex. to donwload firefox on mozilla.org):
  Check the filter with the current URI if the hosted domain file doesn't match.
  Attention to the filtering order : First the file hosted domain is checked, then the current website address.
  The data used to mark a domain as "previous" is still the one from the file hosted domain.
+ Limit the saving window width to the user main screen size. (Thanks to Julien)
+ Add an option to show a menu list on the saving window to select the saving folder from the filter's list.
* Correction for unicode path (filters using unicode character in version 0.9.2 might be deleted, please rewrite them manually).
* Correction of the editable parametter of new created filters.
* Changed the way the links in the "about..." window works. Now it will open in a new tab.
* Bigger menu and window for better visibility.
* Code simplification for moving filters up/down.
* Code simplification for the loading and auto-filling data in the "add" window.
* Better visibility : All the windows are now dragable and the content fit accordingly.
* Bug correction preventing the loading and reading of undefine or non existing preferences in about:config. (Thanks to Martin)
* Complete script recoding to Global namespace (asked by Mozilla.com to submit the extension in public area)
* cleaner code and comments.


Version 0.9.2: (2009 01 26)
* Correction for Vista: Forced the variable browser.download.folderList to "2" when openning the ASF preferences window.
* Corrected the "active" column, the filters couldn't be activated or deactivated temporarily.
* Compatibility with Themes: The default colors are now used, all the text should be correctly visible.
  The pictures have been updated to be visible on dark themes.
* Edited between 0.9.2 and 0.9.3: Firefox 3.1b2, 3.1b3, 3.5b4


Version 0.9.1: (2008 11 01)
+ Italian localisation by Scognito.
+ Added a radio menu while saving, allowing the user to choose quickly between the last two folders.
  The second choice appears only if it's different from the first one.
* Corrected a script bug on filter verification while "use the last folder" was selected. (Thanks to Carsten)
* Hide the option "Affect the 'save as...'" on Firefox 3, this option is used automaticaly.
* Removed the "Add a filter" popup while saving. It made some focus problem and a window position error.
  The link is still here and open now the main window to allow the user to add or edit existing filters.
  While adding a filter using this link, the field will be auto-filled with current file name and domain.
* Fixed a bug on Firefox 3 and Windows Vista: Changed an internal Firefox option allowing the user to use defined folders. (Thanks to Carsten)
  (browser.download.folderList = 2) On Windows Vista, the default value is set to 1.
  Different possible values are : 0 = desktop ; 1 = default saving folder ; 2 = user choice.
* Fixed the specified path on the saving windows on Firefox3.
* Fixed the double-cliking on filters. Now the fields are not editable on firefox3.



Version 0.9.0: (2008 06 28)
+ Work with Firefox 3.0.*
+ Added a new button for informations and help on using the extension.
+ New menu allowing you to add a filter just before saving the file, with Domain and file areas filled with the current download properties.
  After adding a filter that way, the filters are checked again to apply the new filter to the current downloaded file.
  Known bug: A window focus problem can occur while closing the filter panel.
- Drop of the option to activate or deactivate the extension. To deactivate it temporarily, please use the extension manager.
* New way to check the filters (addEventlistener instead of OnLoad), for a better compatibility with other extensions.
* Corrected the per filter "Active" column properties which didn't stay hidden correctly.


Version 0.8.7: (2008 01 06)
+ ... version for Windows and Linux (and maybe Mac ? Can someone test it please ?)
+ Compatible with Firefox 3.0 beta (few changes to the script).
* The Enter key is now affected to the accept button (Ok, Add, Edit). On the previous version, it was on the Cancel button.


Version 0.8.6 - Linux fix: (2008 01 04)
* Changes on the "OK" buttons which didn't appear in the main option panel in Linux.
Info:
On linux, there is only a "Close" button and the checking button are saved automatically when checked by the user. Unfortunately the Table array is not saved on this process.
I removed the "Accept" button and replaced it with a scripted one "Save and close".


Version 0.8.6: (2007 07 09)
* Words and sentences correction. Thanks to Goofy from Mozilla.org comment.


Version 0.8.5: (2007 04 01)
+ Added an option to show some informations on the downloading window.
+ Added an option to keep in memory the domain the file came from.
* Default folder is now working even if no filter is set.
* Changed the way the Regular expressions help window is shown. Use of an Iframe and an html page instead of Xul's dtd


Version 0.8.4: (2007 02 24)
+ French translation
* Converted the localisation files to utf-8.


Version 0.8.3: (2007 02 17)
+ Added some examples and short help on how regular expressions are working. Available in the Add & Edit filter window.


Version 0.8.2:(2007 02 15)
First public release.
+ Added an option to affect the path of the Web page saving menu (File, save as...)


Version 0.8.1:
* Folder selection: The picking window opens now on the previously choosed folder. Before, it opened on a random one from: documents and settings, desktop et the user folder.
* Restriction of the folder selection: removed the possibility to write the path manually, now only the "Select..." button is valid to select the destination folder.


Version 0.8.0:
Functions:
+ Priority sorting filter (option to move up or down the filters)
+ Work with normal, wildcard, and RegExp. filters.
+ Select folder manually or with a Select button.
+ Edit a filter with Double-click on the filters in the list.
+ Skin of the GUI with pictures.
</pre>
<br />
<br />
<br />
<br />
<br /><b><u>Thanks to</u></b>:
<br />
<br />- Goofy, Haynee: Read and corrected french and english.
<br />- MrCOLOMBO: Thanks for the ideas, but I had to use current menu with popup to keep security checking.
<br />- Photonic: Pointing the problem with the Firefox "Applications" menu :)
<br />- Carsten: Help with a script error and a Firefox option on Windows Vista making the filters not working.
<br />- Martin: Help with finding the bug when reading a Firefox preference not set or empty.
<br />- Ted Gifford: Script modification allowing group capture in dynamic variables.
<br />
<br />
<br /><b><u>Translators</u></b>:
<br />- English : Cyan.
<br />- French : Cyan.
<br />- Italian : Scognito.
<br />
<br />
</body>
</html>
